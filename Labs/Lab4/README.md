# Лабораторная работа №4 IPv4/6
#### Цель: 
Распланировать адресное пространство.
Настроить IP на всех активных портах для дальнейшей работы над проектом. Адресное пространство должно быть задокументировано.

## Топология

В ходе выполнения лабораторной работы необходимо настроить схему:

![](lab_topology.PNG)

## Ход работы

Лабораторная работа разбита на 4 части:
1) Разработка и документирование адресного пространства для лабораторного стенда
2) Настройка ip адресов на всех активных портах
3) Настройка каждого VPC в каждом офисе в своем VLAN
4) Настройка VLAN управления для сетевых устройств

## Часть 1. Разработка и документирование адресного пространства для лабораторного стенда

### Таблица адресов

В ходе выполнения лабораторной работы было разработано адресное пространство, представленное в таблице:

| Устройство | Интерфейс  | Тип ip адреса   | IP адрес                | Маска подсети | Описание        |
| ---------- | -----------| ----------------|-------------------------|---------------|-----------------|
| **Москва**                                                                                            |
| R14        | e0/2       | IPv4            |                         |               | Киторн          |
|            |            | IPv6            |                         |               | Киторн          |
|            |            | IPv6 Link-Local |                         |               | Киторн          |
|            | e0/3       | IPv4            |                         |               | R14 - R19       |
|            |            | IPv6            |                         |               | R14 - R19       |
|            |            | IPv6 Link-Local |                         |               | R14 - R19       |
|            | e0/0       | IPv4            |                         |               | R14 - R12       |
|            |            | IPv6            |                         |               | R14 - R12       |
|            |            | IPv6 Link-Local |                         |               | R14 - R12       |
|            | e0/1       | IPv4            |                         |               | R14 - R13       |
|            |            | IPv6            |                         |               | R14 - R13       |
|            |            | IPv6 Link-Local |                         |               | R14 - R13       |
| R15        | e0/2       | IPv4            |                         |               | Ламас           |
|            |            | IPv6            |                         |               | Ламас           |
|            |            | IPv6 Link-Local |                         |               | Ламас           |
|            | e0/3       | IPv4            |                         |               | R15 - R20       |
|            |            | IPv6            |                         |               | R15 - R20       |
|            |            | IPv6 Link-Local |                         |               | R15 - R20       |
|            | e0/0       | IPv4            |                         |               | R15 - R13       |
|            |            | IPv6            |                         |               | R15 - R13       |
|            |            | IPv6 Link-Local |                         |               | R15 - R13       |
|            | e0/1       | IPv4            |                         |               | R15 - R12       |
|            |            | IPv6            |                         |               | R15 - R12       |
|            |            | IPv6 Link-Local |                         |               | R15 - R12       |
| R19        | e0/0       | IPv4            |                         |               | R19 - R14       |
|            |            | IPv6            |                         |               | R19 - R14       |
|            |            | IPv6 Link-Local |                         |               | R19 - R14       |
| R20        | e0/0       | IPv4            |                         |               | R20 - R15       |
|            |            | IPv6            |                         |               | R20 - R15       |
|            |            | IPv6 Link-Local |                         |               | R20 - R15       |
| R12        | e0/2       | IPv4            |                         |               | R12 - R14       |
|            |            | IPv6            |                         |               | R12 - R14       |
|            |            | IPv6 Link-Local |                         |               | R12 - R14       |
|            | e0/3       | IPv4            |                         |               | R12 - R15       |
|            |            | IPv6            |                         |               | R12 - R15       |
|            |            | IPv6 Link-Local |                         |               | R12 - R15       |
|            | e0/0       | IPv4            |                         |               | R12 - SW4       |
|            |            | IPv6            |                         |               | R12 - SW4       |
|            |            | IPv6 Link-Local |                         |               | R12 - SW4       |
|            | e0/1       | IPv4            |                         |               | R12 - SW5       |
|            |            | IPv6            |                         |               | R12 - SW5       |
|            |            | IPv6 Link-Local |                         |               | R12 - SW5       |
| R13        | e0/2       | IPv4            |                         |               | R13 - R15       |
|            |            | IPv6            |                         |               | R13 - R15       |
|            |            | IPv6 Link-Local |                         |               | R13 - R15       |
|            | e0/3       | IPv4            |                         |               | R13 - R14       |
|            |            | IPv6            |                         |               | R13 - R14       |
|            |            | IPv6 Link-Local |                         |               | R13 - R14       |
|            | e0/0       | IPv4            |                         |               | R13 - SW5       |
|            |            | IPv6            |                         |               | R13 - SW5       |
|            |            | IPv6 Link-Local |                         |               | R13 - SW5       |
|            | e0/1       | IPv4            |                         |               | R13 - SW4       |
|            |            | IPv6            |                         |               | R13 - SW4       |
|            |            | IPv6 Link-Local |                         |               | R13 - SW4       |
| SW4        | e0/X       | IPv4            |                         |               |                 |
|            |            | IPv6            |                         |               |                 |
|            |            | IPv6 Link-Local |                         |               |                 |
| SW5        | e0/X       | IPv4            |                         |               |                 |
|            |            | IPv6            |                         |               |                 |
|            |            | IPv6 Link-Local |                         |               |                 |
| SW3        | e0/X       | IPv4            |                         |               |                 |
|            |            | IPv6            |                         |               |                 |
|            |            | IPv6 Link-Local |                         |               |                 |
| SW2        | e0/X       | IPv4            |                         |               |                 |
|            |            | IPv6            |                         |               |                 |
|            |            | IPv6 Link-Local |                         |               |                 |
| VPC1       | eth0       | IPv4            |                         |               |                 |
|            |            | IPv6            |                         |               |                 |
|            |            | IPv6 Link-Local |                         |               |                 |
| VPC7       | eth0       | IPv4            |                         |               |                 |
|            |            | IPv6            |                         |               |                 |
|            |            | IPv6 Link-Local |                         |               |                 |
| **Киторн**                                                                                            |
| R22        | e0/0       | IPv4            |                         |               | Москву R14      |
|            |            | IPv6            |                         |               | Москву R14      |
|            |            | IPv6 Link-Local |                         |               | Москву R14      |
|            | e0/1       | IPv4            |                         |               | Ламас           |
|            |            | IPv6            |                         |               | Ламас           |
|            |            | IPv6 Link-Local |                         |               | Ламас           |
|            | e0/2       | IPv4            |                         |               | Триада R23      |
|            |            | IPv6            |                         |               | Триада R23      | 
|            |            | IPv6 Link-Local |                         |               | Триада R23      |
| **Ламас**                                                                                             |
| R21        | e0/0       | IPv4            |                         |               | Москву R15      |
|            |            | IPv6            |                         |               | Москву R15      |
|            |            | IPv6 Link-Local |                         |               | Москву R15      |
|            | e0/1       | IPv4            |                         |               | Киторн          |
|            |            | IPv6            |                         |               | Киторн          |
|            |            | IPv6 Link-Local |                         |               | Киторн          | 
|            | e0/2       | IPv4            |                         |               | Триада R24      |
|            |            | IPv6            |                         |               | Триада R24      |
|            |            | IPv6 Link-Local |                         |               | Триада R24      |
| **Триада**                                                                                            |
| R23        | e0/0       | IPv4            |                         |               | Киторн          |
|            |            | IPv6            |                         |               | Киторн          |
|            |            | IPv6 Link-Local |                         |               | Киторн          |
|            | e0/1       | IPv4            |                         |               | R23 - R25       |
|            |            | IPv6            |                         |               | R23 - R25       |
|            |            | IPv6 Link-Local |                         |               | R23 - R25       |
|            | e0/2       | IPv4            |                         |               | R23 - R24       |
|            |            | IPv6            |                         |               | R23 - R24       |
|            |            | IPv6 Link-Local |                         |               | R23 - R24       |
| R24        | e0/0       | IPv4            |                         |               | Ламас           |
|            |            | IPv6            |                         |               | Ламас           |
|            |            | IPv6 Link-Local |                         |               | Ламас           |
|            | e0/1       | IPv4            |                         |               | R24 - R26       |
|            |            | IPv6            |                         |               | R24 - R26       |
|            |            | IPv6 Link-Local |                         |               | R24 - R26       |
|            | e0/2       | IPv4            |                         |               | R24 - R23       |
|            |            | IPv6            |                         |               | R24 - R23       |
|            |            | IPv6 Link-Local |                         |               | R24 - R23       |
|            | e0/3       | IPv4            |                         |               | СПб R18         |
|            |            | IPv6            |                         |               | СПб R18         |
|            |            | IPv6 Link-Local |                         |               | СПб R18         |
| R25        | e0/0       | IPv4            |                         |               | R25 - R23       |
|            |            | IPv6            |                         |               | R25 - R23       |
|            |            | IPv6 Link-Local |                         |               | R25 - R23       |
|            | e0/1       | IPv4            |                         |               | Лабытнанги R27  |
|            |            | IPv6            |                         |               | Лабытнанги R27  |
|            |            | IPv6 Link-Local |                         |               | Лабытнанги R27  |
|            | e0/2       | IPv4            |                         |               | R25 - R26       |
|            |            | IPv6            |                         |               | R25 - R26       |
|            |            | IPv6 Link-Local |                         |               | R25 - R26       |
|            | e0/3       | IPv4            |                         |               | Чокурдах R28    |
|            |            | IPv6            |                         |               | Чокурдах R28    |
|            |            | IPv6 Link-Local |                         |               | Чокурдах R28    |
| R26        | e0/0       | IPv4            |                         |               | R26 - R24       |
|            |            | IPv6            |                         |               | R26 - R24       |
|            |            | IPv6 Link-Local |                         |               | R26 - R24       |
|            | e0/1       | IPv4            |                         |               | Чокурдах R28    |
|            |            | IPv6            |                         |               | Чокурдах R28    |
|            |            | IPv6 Link-Local |                         |               | Чокурдах R28    |
|            | e0/2       | IPv4            |                         |               | R26 - R25       |
|            |            | IPv6            |                         |               | R26 - R25       |
|            |            | IPv6 Link-Local |                         |               | R26 - R25       |
|            | e0/3       | IPv4            |                         |               | СПб R18         |
|            |            | IPv6            |                         |               | СПб R18         |
|            |            | IPv6 Link-Local |                         |               | СПб R18         |
| **Лабытнанги**                                                                                        |
| R27        | e0/0       | IPv4            |                         |               | Триада R25      |
|            |            | IPv6            |                         |               | Триада R25      |
|            |            | IPv6 Link-Local |                         |               | Триада R25      |
| **Чокурдах**                                                                                          |
| R28        | e0/0       | IPv4            |                         |               | Триада R26      |
|            |            | IPv6            |                         |               | Триада R26      |
|            |            | IPv6 Link-Local |                         |               | Триада R26      |
|            | e0/1       | IPv4            |                         |               | Триада R25      |
|            |            | IPv6            |                         |               | Триада R25      |
|            |            | IPv6 Link-Local |                         |               | Триада R25      |
|            | e0/2       | IPv4            |                         |               | R28 - SW29      |
|            |            | IPv6            |                         |               | R28 - SW29      |
|            |            | IPv6 Link-Local |                         |               | R28 - SW29      |
| SW29       | e0/2       | IPv4            |                         |               | SW29 - R28      |
|            |            | IPv6            |                         |               | SW29 - R28      |
|            |            | IPv6 Link-Local |                         |               | SW29 - R28      |
| VPC30      | eth0       | IPv4            |                         |               |                 |
|            |            | IPv6            |                         |               |                 |
|            |            | IPv6 Link-Local |                         |               |                 |
| VPC31      | eth0       | IPv4            |                         |               |                 |
|            |            | IPv6            |                         |               |                 |
|            |            | IPv6 Link-Local |                         |               |                 |
| **Санкт-Петербург**                                                                                   |
| R18        | e0/0       | IPv4            |                         |               | R18 - R16       |
|            |            | IPv6            |                         |               | R18 - R16       |
|            |            | IPv6 Link-Local |                         |               | R18 - R16       |
|            | e0/1       | IPv4            |                         |               | R18 - R17       |
|            |            | IPv6            |                         |               | R18 - R17       |
|            |            | IPv6 Link-Local |                         |               | R18 - R17       |
|            | e0/2       | IPv4            |                         |               | Триада R24      |
|            |            | IPv6            |                         |               | Триада R24      |
|            |            | IPv6 Link-Local |                         |               | Триада R24      |
|            | e0/3       | IPv4            |                         |               | Триада R26      |
|            |            | IPv6            |                         |               | Триада R26      |
|            |            | IPv6 Link-Local |                         |               | Триада R26      |
| R17        | e0/0       | IPv4            |                         |               | R17 - SW9       |
|            |            | IPv6            |                         |               | R17 - SW9       |
|            |            | IPv6 Link-Local |                         |               | R17 - SW9       |
|            | e0/1       | IPv4            |                         |               | R17 - R18       |
|            |            | IPv6            |                         |               | R17 - R18       |
|            |            | IPv6 Link-Local |                         |               | R17 - R18       |
|            | e0/2       | IPv4            |                         |               | R17 - SW10      |
|            |            | IPv6            |                         |               | R17 - SW10      |
|            |            | IPv6 Link-Local |                         |               | R17 - SW10      |
| R16        | e0/0       | IPv4            |                         |               | R16 - SW10      |
|            |            | IPv6            |                         |               | R16 - SW10      |
|            |            | IPv6 Link-Local |                         |               | R16 - SW10      |
|            | e0/1       | IPv4            |                         |               | R16 - R18       |
|            |            | IPv6            |                         |               | R16 - R18       |
|            |            | IPv6 Link-Local |                         |               | R16 - R18       |
|            | e0/2       | IPv4            |                         |               | R16 - SW9       |
|            |            | IPv6            |                         |               | R16 - SW9       |
|            |            | IPv6 Link-Local |                         |               | R16 - SW9       |
|            | e0/3       | IPv4            |                         |               | R16 - R32       |
|            |            | IPv6            |                         |               | R16 - R32       |
|            |            | IPv6 Link-Local |                         |               | R16 - R32       |
| R32        | e0/0       | IPv4            |                         |               | R32 - R16       |
|            |            | IPv6            |                         |               | R32 - R16       |
|            |            | IPv6 Link-Local |                         |               | R32 - R16       |
| SW9        | e0/X       | IPv4            |                         |               |                 |
|            |            | IPv6            |                         |               |                 |
|            |            | IPv6 Link-Local |                         |               |                 |
| SW10       | e0/X       | IPv4            |                         |               |                 |
|            |            | IPv6            |                         |               |                 |
|            |            | IPv6 Link-Local |                         |               |                 |
| VPC30      | eth0       | IPv4            |                         |               |                 |
|            |            | IPv6            |                         |               |                 |
|            |            | IPv6 Link-Local |                         |               |                 |
| VPC31      | eth0       | IPv4            |                         |               |                 |
|            |            | IPv6            |                         |               |                 |
|            |            | IPv6 Link-Local |                         |               |                 |



### Таблица подсетей

Информация о подсетях разработанных в хое лабораторной работы представленна в таблице:

| IP адрес подсети   | Маска подсети   | Префикс ipv6              |  Оборудование: интерфейсы          | Описание                           |
|--------------------|-----------------|---------------------------|------------------------------------| -----------------------------------|
| 192.168.21.0       | 255.255.255.0   | fde8:8a:fc:1:21::/80      | R21:loopback                       | Внуренняя подсеть Ламас            |
| 192.168.22.0       | 255.255.255.0   | fde8:8a:fc:1:22::/80      | R22:loopback                       | Внуренняя подсеть Киторн           |
| 192.168.27.0       | 255.255.255.0   | fde8:8a:fc:1:27::/80      | R27:loopback                       | Внуренняя подсеть Лабытанги        |
| 192.168.52.0       | 255.255.255.0   | fde8:8a:fc:1:52::/80      | R28:e0/2; VPC30:eth0; VPC30:eth0   | Внуренняя подсеть Чокурды          |
| 192.168.52.0       | 255.255.255.0   | fde8:8a:fc:1:52::/80      | R23:e0/1,e0/2; R24:e0/1,e0/2;      | Внуренняя подсеть Триада           |
|                    |                 |                           | R25:e0/0,e0/2; R26:e0/0,e0/2       |                                    |
| 192.168.18.0       | 255.255.255.0   | fde8:8a:fc:1:18::/80      | R18:e0/0,e0/1; R17:e0/0,e0/1,e0/2; | Внуренняя подсеть СПб              |
|                    |                 |                           | R16:e0/0,e0/1,e0/2,e0/3; R32:e0/0; |                                    |
|                    |                 |                           | VPC8:eth0                          |                                    |
| 192.168.10.0       | 255.255.255.128 | fde8:8a:fc:1:10:m1:0:0/96 | R14:e0/0,e0/1,e0/3; R19:e0/0;      | Внуренняя подсеть Москва           |
|                    |                 |                           | R15:e0/0,e0/1,e0/3; R20:e0/0;      | (уровень распределения)            |
|                    |                 |                           | R12:e0/0,e0/1,e0/3,e0/3;           |                                    |
|                    |                 |                           | R13:e0/0,e0/1,e0/3,e0/3            |                                    |
| 192.168.10.128     | 255.255.255.192 | fde8:8a:fc:1:10:m2:0:0/96 | VPC1:eth0                          | Внуренняя подсеть Москва (клиенты) |
| 192.168.10.192     | 255.255.255.192 | fde8:8a:fc:1:10:m3:0:0/96 | VPC7:eth0                          | Внуренняя подсеть Москва (клиенты) |
| 192.168.1.0        | 255.255.255.128 | fde8:8a:fc:1:1:1:0:0/96   | не используется                    | Внешняя подсеть Москва             |



### Таблица подсетей

Информация о подсетях разработанных в хое лабораторной работы представленна в таблице:

| VLAN      | IP адрес подсети | Маска подсети | Имя подсети     | Интерфейсы                       |
| ----------|------------------|---------------|-----------------|----------------------------------| 
| 22        | 192.168.22.0     | 255.255.255.0 | Kitorn          | R22: loopback                    | 
| 21        |                  |               | Lamas           | R21: loopback                    | 
| 27        |                  |               | Labitananga     | R27: loopback                    |
| 28        |                  |               | Chokurdah       | R28: e0/2                        |
| N/A       |                  |               | N/A             | R23: e0/1, e0/2; R24: e0/1, e0/2 |
|           |                  |               | N/A             | R23: e0/1, e0/2; R24: e0/1, e0/2 | 
| 1         |                  |               | N/A             | S2: e0/0                         |
| 100       |                  |               | Clients         | S1: e0/0                         |
| 800       |                  |               | Management      |                                  |
| 999       |                  |               | Parking_Lot     | S1: e0/2-3                       | 
| 1000      |                  |               | Native          | N/A                              |



